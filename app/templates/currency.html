{% extends 'base.html' %}

{% block title %}Currency - {{ super() }}{% endblock %}

{% block metas %}{{ super() }}<meta http-equiv="cache-control" content="no-cache, must-revalidate, post-check=0, pre-check=0" />
  <meta http-equiv="cache-control" content="max-age=0" />
  <meta http-equiv="expires" content="0" />
  <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
  <meta http-equiv="pragma" content="no-cache" />{% endblock %}

{% block app_content %}
  <div class="container">
    <div class="row">
      <div class="col-md-8">
        <h1>{{ id }}</h1>
        <embed id="Graphs" class="graph" type="image/svg+xml" src="../static/images/candles.svg" />
        <embed id="lineGraphs" class="graph" type="image/svg+xml" src="../static/images/prices.svg" />
      </div><!--Ending div for col-8-->
      <div class="col-md-4">
        <!--TODO: add current price to display-->
        <h3>Current price: ${{ current_price }}</h3>
        <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
          <div class="carousel-inner">
            {% for article in news.articles %}
              {% if loop.index == 1 %}
              <div class="carousel-item active">
              {% else %}
              <div class="carousel-item">
              {% endif %}
                <div class="col-md card newsfeed">
                  <h5>Top Cryptocurrency News</h5>
                  <img class="card-img-top" src="{{ article.urlToImage }}" alt="Placeholder Image">
                  <div class="card-title"><a class="article_pic newsfeed_pic" target="_blank" href="{{ article.url}}">{{ article.title }}</a></div>
                  <div class="card-subtitle">{{ article.publishedAt[0:10] }}</div>
                  <div class="card-text">{{ article.description }}</div>
                </div> <!-- Ends card -->
              <!-- <img class="d-block w-100" src="https://placehold.it/50x50" alt="First slide"> -->
            </div><!--Ends carousel-item active-->
            {% endfor %}
            <!-- <div class="carousel-item">
              <img class="d-block w-100" src="https://placehold.it/50x50" alt="Second slide">
            </div>
            <div class="carousel-item">
              <img class="d-block w-100" src="https://placehold.it/50x50" alt="Third slide">
            </div> -->
          </div><!--Ends carousel inner-->
          <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
          </a>
          <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
          </a>
        </div><!--Ends id carouselExampleControls-->
      </div><!--Ending div for col-4-->
    </div><!--Ending row-->
  </div><!--Ending container-->

  <script>
  (function() {
    var url = "../static/images/candles.svg?rnd="+Math.random();
    var elem = document.getElementById('Graphs');
    elem.setAttribute("src", url);
  })();
  </script>

{% endblock %}
